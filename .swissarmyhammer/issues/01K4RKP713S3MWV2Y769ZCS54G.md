# Complete Final Prompt System Migration - Eliminate Last 4 Dependencies

## Problem
The final 4 dependencies from `swissarmyhammer-tools` to the main crate remain, all related to the prompt system. These need to be eliminated to achieve complete domain separation.

## Current State - 4 Remaining Dependencies

### **All Remaining Dependencies are Prompt-Related:**

#### **src/mcp/error_handling.rs:4**
```rust
use swissarmyhammer::{PromptLibrary, PromptResolver};
```

#### **src/mcp/tests.rs:12**  
```rust
use swissarmyhammer::{Prompt, PromptLibrary, PromptResolver};
```

#### **src/mcp/file_watcher.rs:8**
```rust
use swissarmyhammer::PromptResolver;
```

#### **src/mcp/server.rs:12**
```rust
use swissarmyhammer::{PromptLibrary, PromptResolver};
```

## Required Solution
Update these 4 imports to use the `swissarmyhammer-prompts` domain crate instead of the main crate.

## Implementation Plan

### Phase 1: Verify swissarmyhammer-prompts Availability
- [ ] Confirm `swissarmyhammer-prompts` domain crate exists and exports needed types
- [ ] Verify `PromptLibrary`, `PromptResolver`, and `Prompt` are available
- [ ] Check that swissarmyhammer-tools has dependency on prompts crate

### Phase 2: Update All 4 Import Statements

#### **Update error_handling.rs:4**
- [ ] Change:
  ```rust
  // FROM: use swissarmyhammer::{PromptLibrary, PromptResolver};
  // TO:   use swissarmyhammer_prompts::{PromptLibrary, PromptResolver};
  ```

#### **Update tests.rs:12**
- [ ] Change:
  ```rust
  // FROM: use swissarmyhammer::{Prompt, PromptLibrary, PromptResolver};
  // TO:   use swissarmyhammer_prompts::{Prompt, PromptLibrary, PromptResolver};
  ```

#### **Update file_watcher.rs:8**
- [ ] Change:
  ```rust
  // FROM: use swissarmyhammer::PromptResolver;
  // TO:   use swissarmyhammer_prompts::PromptResolver;
  ```

#### **Update server.rs:12**
- [ ] Change:
  ```rust
  // FROM: use swissarmyhammer::{PromptLibrary, PromptResolver};
  // TO:   use swissarmyhammer_prompts::{PromptLibrary, PromptResolver};
  ```

### Phase 3: Verification
- [ ] Build swissarmyhammer-tools to ensure no compilation errors
- [ ] Run tests to verify prompt functionality still works
- [ ] Test MCP server functionality with prompt domain crate
- [ ] Verify prompt loading and resolution works correctly

## COMPLETION CRITERIA - How to Know This Issue is REALLY Done

**This issue is complete when:**

```bash
# Should return ZERO results (complete domain separation):
rg "use swissarmyhammer::" swissarmyhammer-tools/

# Should find new imports from prompts domain crate:
rg "use swissarmyhammer_prompts::" swissarmyhammer-tools/
```

**Target**: 0 dependencies from swissarmyhammer-tools to main crate  
**Current**: 4 dependencies (all prompt-related)

## Expected Final State

### **Before (Current - 4 dependencies):**
```rust
use swissarmyhammer::{PromptLibrary, PromptResolver};
use swissarmyhammer::{Prompt, PromptLibrary, PromptResolver};
use swissarmyhammer::PromptResolver;
```

### **After (Target - 0 dependencies):**
```rust
use swissarmyhammer_prompts::{PromptLibrary, PromptResolver};
use swissarmyhammer_prompts::{Prompt, PromptLibrary, PromptResolver};
use swissarmyhammer_prompts::PromptResolver;
```

## Success Criteria
- [ ] Zero imports from swissarmyhammer-tools to main swissarmyhammer crate
- [ ] All prompt functionality works through swissarmyhammer-prompts domain crate
- [ ] MCP server functionality preserved
- [ ] All tests pass
- [ ] **COMPLETE DOMAIN SEPARATION ACHIEVED**

## Strategic Importance
This is the **final step** to achieve 100% domain separation between swissarmyhammer-tools and the main crate. Once complete:
- ✅ **Complete independence** of tools from main crate
- ✅ **Clean domain boundaries** across entire architecture
- ✅ **Zero coupling** between tools and main crate

## Notes
This represents the **final 4 import statements** blocking complete domain separation. All other domain extractions have been successfully completed.

Once this is done, swissarmyhammer-tools will depend **only on domain crates and shared infrastructure**, achieving the architectural goal of complete separation from the monolithic main crate.