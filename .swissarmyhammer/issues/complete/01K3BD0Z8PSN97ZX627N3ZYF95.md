review the figment source code. use this knowledge to eliminate any duplication of work or code you have created in swissarmyhammer-config

## Proposed Solution

After analyzing the figment source code and our swissarmyhammer-config implementation, I've identified several areas where we can eliminate duplication by leveraging figment's built-in capabilities more effectively:

### 1. Simplify File Loading Logic in ConfigProvider

**Current Duplication**: Our `provider.rs:load_config_file()` method manually handles different file formats with match statements and explicit provider creation.

**Figment Solution**: Figment's `Toml::file()`, `Yaml::file()`, and `Json::file()` providers already handle this automatically.

**Action**: Refactor `build_figment()` method to use figment providers directly instead of our manual format detection.

### 2. Leverage Figment's Serialized Provider for Defaults

**Current Duplication**: Our `defaults.rs` module manually creates HashMap values and applies them via custom logic.

**Figment Solution**: Figment's `Serialized::defaults()` provider is designed exactly for this purpose.

**Action**: Replace our custom defaults application with `Serialized::defaults(ConfigDefaults::values())`.

### 3. Consolidate Environment Variable Handling

**Current Duplication**: We have extensive custom environment variable substitution logic in `env_substitution.rs` that tries to replicate functionality.

**Figment Solution**: Figment's `Env` provider with prefixes (`SAH_` and `SWISSARMYHAMMER_`) handles environment variables natively.

**Action**: 
- Use figment's `Env::prefixed("SAH_")` and `Env::prefixed("SWISSARMYHAMMER_")` instead of custom env var loading
- Retain our custom env substitution only for template variables (like `${VAR}` patterns in strings), which is beyond figment's scope

### 4. Simplify Provider Chain Construction

**Current Approach**: Complex manual construction of figment with custom providers.

**Better Approach**: Use figment's fluent API more idiomatically:

```rust
Figment::from(Serialized::defaults(defaults))
    .merge(discovered_files.into_iter().map(|f| match f.format {
        ConfigFormat::Toml => Toml::file(f.path),
        ConfigFormat::Yaml => Yaml::file(f.path), 
        ConfigFormat::Json => Json::file(f.path),
    }))
    .merge(Env::prefixed("SAH_"))
    .merge(Env::prefixed("SWISSARMYHAMMER_"))
```

### 5. Keep Our Value-Added Components

**File Discovery**: Our `FileDiscovery` service is valuable and not duplicated by figment.
**TemplateContext**: Our template context with environment substitution patterns provides functionality beyond figment's scope.
**Template Renderer**: Integration with Liquid templates is SwissArmyHammer-specific.

### Implementation Steps

1. Refactor `ConfigProvider::build_figment()` to use figment providers directly
2. Replace `defaults::apply_to()` with `Serialized::defaults()` 
3. Remove custom file loading logic in favor of figment's built-in providers
4. Simplify environment variable loading to use figment's `Env` provider
5. Retain but simplify our custom environment variable substitution for template strings
6. Update tests to reflect the simplified implementation
7. Ensure backward compatibility is maintained

This will significantly reduce code complexity while maintaining all current functionality.
## Implementation Results

I have successfully eliminated duplication in the swissarmyhammer-config crate by leveraging figment's built-in capabilities more effectively. Here's what was accomplished:

### Changes Made

1. **Simplified ConfigProvider::build_figment()** - Removed unnecessary helper methods and inlined figment provider creation directly in the main method. This eliminates ~45 lines of duplicate code.

2. **Removed load_config_file() method** - This method was essentially duplicating figment's built-in functionality. Now we use `Toml::file()`, `Yaml::file()`, and `Json::file()` providers directly.

3. **Removed load_env_vars() method** - Replaced with direct use of figment's `Env::prefixed()` providers with proper precedence handling.

4. **Eliminated premature error checking** - Removed unnecessary file parsing validation that figment handles automatically during extraction.

5. **Updated test suite** - Fixed the `test_load_env_vars()` test to use figment providers directly instead of the removed helper method.

### Code Quality Improvements

- **Reduced complexity**: Eliminated ~50 lines of duplicate code
- **Better figment idioms**: Now using figment's fluent API more naturally
- **Maintained functionality**: All existing tests pass, ensuring backward compatibility
- **No performance impact**: Changes are purely structural improvements

### What We Kept (Correctly Not Duplicated)

After analysis, these components provide value beyond figment and were correctly retained:

- **FileDiscovery**: Provides SwissArmyHammer-specific configuration file discovery logic
- **TemplateContext**: Custom template context with environment variable substitution patterns (`${VAR}`)
- **Environment substitution**: Template string substitution (different from figment's environment variable configuration)
- **Default values**: Already using `Serialized::defaults()` correctly
- **Template renderer**: SwissArmyHammer-specific Liquid template integration

### Verification

- ✅ All tests pass (`cargo nextest run`)
- ✅ No clippy warnings (`cargo clippy`)
- ✅ Full workspace builds successfully (`cargo build`)
- ✅ Functionality preserved with simplified implementation

The refactoring successfully eliminated duplication while maintaining all existing functionality and improving code clarity by using figment's intended patterns more directly.