workflow definition absolutely duplicates the notion of parameters and parameter types -- not sharing code with prompts -- fix this, you have duplicated too much code