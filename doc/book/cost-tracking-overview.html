<!DOCTYPE HTML>
<html lang="en" class="navy sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Cost Tracking - SwissArmyHammer Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="Complete guide to using SwissArmyHammer - the MCP server for managing prompts">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "navy";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('navy')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SwissArmyHammer Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/wballard/swissarmyhammer" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/wballard/swissarmyhammer/edit/main/doc/src/src/cost-tracking-overview.md" title="Suggest an edit" aria-label="Suggest an edit" rel="edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="cost-tracking-overview"><a class="header" href="#cost-tracking-overview">Cost Tracking Overview</a></h1>
<p>SwissArmyHammer’s cost tracking system provides comprehensive monitoring and analysis of Claude API usage costs during issue workflow execution. This feature helps you understand, optimize, and budget for AI assistance costs in your development workflow.</p>
<h2 id="what-is-cost-tracking"><a class="header" href="#what-is-cost-tracking">What is Cost Tracking?</a></h2>
<p>Cost tracking automatically monitors every interaction with Claude’s API during issue processing, recording:</p>
<ul>
<li><strong>Token Usage</strong>: Input and output token consumption for each API call</li>
<li><strong>API Costs</strong>: Real-time cost calculation based on current Claude pricing</li>
<li><strong>Session Analytics</strong>: Complete cost breakdown per issue workflow</li>
<li><strong>Performance Metrics</strong>: API response times and success rates</li>
<li><strong>Aggregated Reports</strong>: Cross-issue cost analysis and trends</li>
</ul>
<h2 id="key-benefits"><a class="header" href="#key-benefits">Key Benefits</a></h2>
<h3 id="-visibility"><a class="header" href="#-visibility"><strong>🔍 Visibility</strong></a></h3>
<p>Get detailed insights into your AI usage patterns with comprehensive reporting that shows exactly where your Claude API costs are coming from.</p>
<h3 id="-optimization"><a class="header" href="#-optimization"><strong>📊 Optimization</strong></a></h3>
<p>Identify high-cost operations and optimize your prompts and workflows to reduce unnecessary API usage while maintaining effectiveness.</p>
<h3 id="-budget-planning"><a class="header" href="#-budget-planning"><strong>💰 Budget Planning</strong></a></h3>
<p>Accurate cost tracking enables informed budgeting decisions and helps predict monthly API costs based on actual usage patterns.</p>
<h3 id="-performance-analytics"><a class="header" href="#-performance-analytics"><strong>📈 Performance Analytics</strong></a></h3>
<p>Track not just costs but also performance metrics like token efficiency ratios and API response times to optimize your overall workflow.</p>
<h3 id="-flexible-configuration"><a class="header" href="#-flexible-configuration"><strong>🔧 Flexible Configuration</strong></a></h3>
<p>Support for both paid plans (per-token billing) and unlimited plans (cost estimation for planning) with customizable pricing models.</p>
<h2 id="how-it-works"><a class="header" href="#how-it-works">How It Works</a></h2>
<ol>
<li><strong>Automatic Session Creation</strong>: When you start working on an issue, a cost tracking session begins automatically</li>
<li><strong>API Call Recording</strong>: Every Claude API interaction is captured with detailed token usage and timing</li>
<li><strong>Real-time Calculation</strong>: Costs are calculated immediately using the latest pricing information</li>
<li><strong>Session Completion</strong>: When issue work completes, a comprehensive cost report is generated</li>
<li><strong>Issue Integration</strong>: Cost analysis is automatically added to completed issue documentation</li>
</ol>
<h2 id="pricing-models-supported"><a class="header" href="#pricing-models-supported">Pricing Models Supported</a></h2>
<h3 id="paid-plans"><a class="header" href="#paid-plans">Paid Plans</a></h3>
<p>For users on Claude’s paid tiers, cost tracking provides accurate per-token billing calculations:</p>
<pre><code class="language-yaml">cost_tracking:
  enabled: true
  pricing_model: "paid"
  rates:
    input_token_cost: 0.000015   # $0.000015 per input token
    output_token_cost: 0.000075  # $0.000075 per output token
</code></pre>
<h3 id="unlimited-plans"><a class="header" href="#unlimited-plans">Unlimited Plans</a></h3>
<p>For users with unlimited access, cost tracking estimates hypothetical costs for budgeting and optimization:</p>
<pre><code class="language-yaml">cost_tracking:
  enabled: true
  pricing_model: "max"  # Unlimited plan with cost estimation
</code></pre>
<h2 id="sample-cost-report"><a class="header" href="#sample-cost-report">Sample Cost Report</a></h2>
<p>When an issue is completed, you’ll see detailed cost analysis like this:</p>
<pre><code class="language-markdown">## Cost Analysis

**Total Cost**: $0.34
**Total API Calls**: 4  
**Total Input Tokens**: 2,100
**Total Output Tokens**: 3,250
**Session Duration**: 3m 45s
**Completed**: 2024-01-15 14:30:25 UTC

### Cost Breakdown
- **API Call #1**: $0.08 (500 input, 750 output tokens) - `/v1/messages`
- **API Call #2**: $0.15 (800 input, 1,200 output tokens) - `/v1/messages`  
- **API Call #3**: $0.07 (450 input, 680 output tokens) - `/v1/messages`
- **API Call #4**: $0.04 (350 input, 620 output tokens) - `/v1/messages`

### Performance Metrics
- **Average cost per call**: $0.085
- **Token efficiency**: 1.55 (output/input ratio)
- **Success rate**: 100% (4/4 successful)
- **Average response time**: 1.2s
</code></pre>
<h2 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h2>
<p>Cost tracking is disabled by default to ensure it doesn’t interfere with existing workflows. To enable it:</p>
<ol>
<li><strong>Enable in Configuration</strong>: Add cost tracking configuration to your <code>swissarmyhammer.yaml</code></li>
<li><strong>Choose Pricing Model</strong>: Select “paid” for actual billing or “max” for cost estimation</li>
<li><strong>Configure Rates</strong>: Set appropriate token costs for your Claude plan</li>
<li><strong>Start Tracking</strong>: Begin working on issues - tracking happens automatically</li>
</ol>
<h2 id="data-privacy-and-storage"><a class="header" href="#data-privacy-and-storage">Data Privacy and Storage</a></h2>
<ul>
<li><strong>In-Memory by Default</strong>: Cost data is stored in memory during execution with automatic cleanup</li>
<li><strong>Optional Database</strong>: Enable SQLite backend for persistent storage and advanced analytics</li>
<li><strong>No External Transmission</strong>: All cost tracking data stays local to your system</li>
<li><strong>Configurable Retention</strong>: Control how long cost data is retained (default 7 days for in-memory)</li>
</ul>
<h2 id="whats-next"><a class="header" href="#whats-next">What’s Next?</a></h2>
<ul>
<li><a href="./cost-tracking-getting-started.html">Getting Started Guide</a> - Set up cost tracking in 5 minutes</li>
<li><a href="./cost-tracking-configuration.html">Configuration Reference</a> - Complete configuration options</li>
<li><a href="./cost-tracking-troubleshooting.html">Troubleshooting</a> - Common issues and solutions</li>
<li><a href="./cost-tracking-examples.html">Advanced Examples</a> - Production configurations and custom reporting</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="configuration-schema.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="cost-tracking-getting-started.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="configuration-schema.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="cost-tracking-getting-started.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
