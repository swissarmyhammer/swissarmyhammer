<!--
Internal prompt for the rules system's two-stage rendering process.

Stage 1: Rule template is rendered with repository context → produces `rule_content`
Stage 2: This .check prompt is rendered with `rule_content` + target file → final LLM prompt

This prompt instructs the LLM to analyze target files against rendered rules and report
violations in a structured, parseable format.
-->
---
name: .check
title: Rule Check
description: Internal prompt for checking rules against files
category: internal
tags:
  - rules
  - validation
  - internal
parameters:
  - name: rule_content
    description: The rendered rule template content
    required: true
  - name: target_content
    description: The file content being checked
    required: true
  - name: target_path
    description: Path to the file being checked
    required: true
  - name: language
    description: Detected programming language of the file
    required: true
---

You are checking {{ language }} code against the following rule:

---
{{ rule_content }}
---

File: {{ target_path }}

```{{ language }}
{{ target_content }}
```

Analyze this file against the rule above.

**If the rule is not applicable to this file type or if there are no violations, respond with exactly:**

PASS

**If violations are found, respond with the following format for EACH violation:**

VIOLATION
Line: [line number]
Severity: [error/warning/info/hint]
Message: [description of the violation]
Suggestion: [suggested fix]

**Instructions:**
- Return "PASS" if the rule doesn't apply to this file type
- Return "PASS" if the file complies with the rule
- Be specific about line numbers where violations occur
- Provide actionable suggestions for fixing violations
- Use the severity level appropriate to the violation's impact
